<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>懒加载图片</title>
</head>
<body>
    <!-- 网页在渲染的时候， 
    http请求数量
    chrome 性能最好，同时并发的请求数十个
    将图片下载 放到dom ready 事件之后
    将有效提升网页打开速度
    占位图片，
    优化前 n张照片 url不一样 http请求数是 n
    优化后 图片上的http 数量只有 1         -->
    <!-- 如果url 一样，不会重复发送 -->

    <img class="pic1"
    src="http://static.youku.com/yk/vmanage/img/manage/video/mask.d53611efc6.png"
    origin_src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1526021760&di=e628799b17042b2cbb0f2ffc730e2f5b&imgtype=jpg&er=1&src=http%3A%2F%2Fimg4.duitang.com%2Fuploads%2Fitem%2F201610%2F13%2F20161013203350_YA8Ry.jpeg" alt=""  />
    <img src="http://static.youku.com/yk/vmanage/img/manage/video/mask.d53611efc6.png"
     origin_src="https://ss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=2898184291,1524003022&fm=27&gp=0.jpg" alt="" />
     <script src="./lazyload.js"></script>
    <script>
        // 已经是用户看到了网页了， dom ready
        // 优化图片下载， 将其推后，
        window.onload = function () {
            const img = document.querySelector('.pic1');
            // console.log(img);
            LazyLoadImage.setSrc(img);
            // 懒加载图片 
        //     // 在页面打开后， 重新下载图片
        //     const img = document.querySelector('.pic1');
        //     // origin_src 自定义属性 
        //     const url = img.getAttribute('origin_src');
        //     console.log(url);
        //     // img.src = url;
        //     //图片不要直接url 设置过去，太那啥。。。
        //     const oImg = document.createElement('img');
        //     oImg.style.display = 'none';
        //     document.body.appendChild(oImg);
        //     oImg.onload = function(){
        //         // 幕后工作者 已经下载了图片
        //         // url 一旦下载，在浏览器缓存（静态）文件
        //         img.src = url;
        //     }
        //     //图片的下载是异步，图片有大小
        //     oImg.src = url;
        //     // img.setAttribute('src', url);
        // }
        }
    </script>
    </body>
    </html>